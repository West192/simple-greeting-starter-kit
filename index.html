<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Безопасный онлайн-банкинг с современными функциями и надёжным обслуживанием">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="СберБанк">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ffffff">
    <link rel="apple-touch-icon" href="Логотип.jpg">
    <link rel="manifest" href="manifest.json">
    <title>СберБанк Онлайн</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        
        body {
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
            position: relative;
            padding-bottom: 83px;
        }
        
        .image-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .image-container img {
            width: 100%;
            display: block;
            height: auto;
        }

        .button {
            position: absolute;
            width: 50px;
            height: 40px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            z-index: 100;
            -webkit-tap-highlight-color: transparent;
        }

        #button1 {
            top: 1%;
            left: 1%;
        }

        #button2 {
            top: 21.5%;
            right: 4%;
        }

        #button3 {
            top: 49.7%;
            left: 13.5%;
            transform: translateX(-50%);
        }

        .balance {
            position: absolute;
            color: rgb(0, 0, 0);
            font-size: 16px;
            top: 15.5%;
            left: 25.2%;
            font-weight: 570;
        }

        .check {
            position: absolute;
            color: #666;
            font-size: 12px;
            top: 17.1%;
            left: 46.4%;
        }

        .balance2 {
            position: absolute;
            color: rgb(0, 0, 0);
            font-size: 16px;
            top: 15.5%;
            left: 65.3%;
            font-weight: 570;
        }

        .check2 {
            position: absolute;
            color: #666;
            font-size: 12px;
            top: 17.05%;
            left: 76.5%;
        }

        .card1 {
            position: absolute;
            color: #666;
            font-size: 10.6px;
            top: 11.4%;
            left: 25.5%;
        }

        .card2 {
            position: absolute;
            color: #666;
            font-size: 10.6px;
            top: 11.4%;
            left: 35.3%;
        }

        .card3 {
            position: absolute;
            color: #666;
            font-size: 10.6px;
            top: 11.4%;
            left: 65.4%;
        }

        .expenses {
            position: absolute;
            color: rgb(0, 0, 0);
            font-size: 15px;
            top: 66.55%;
            left: 9.8%;
            font-weight: 630;
        }

        .transfer {
            position: absolute;
            color: rgb(0, 0, 0);
            font-size: 12px;
            top: 68.62%;
            left: 56%;
            font-weight: 631;
        }

        .recent-transactions {
            position: absolute;
            width: 93%;
            top: 25%;
            left: 3.8%;
        }

        .transaction {
            display: flex;
            align-items: center;
            padding: 16px;
            background: white;
            margin-bottom: 2px;
            border-radius: 8px;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 16px;
        }

        .transaction-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .transaction-details {
            flex: 1;
        }

        .transaction-name {
            font-weight: 550;
            margin-bottom: 4px;
            color: rgb(0, 0, 0);
            font-size: 15px;
        }

        .transaction-type {
            color: #666;
            font-size: 13px;
        }

        .transaction-amount {
            font-weight: 450;
            color: rgb(0, 0, 0);
            font-size: 15px;
        }

        .transaction-amount.positive {
            color: #12902f;
        }

        .navigation-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }
        
        .navigation-image {
            width: 100%;
            display: block;
        }
        
        .nav-links {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: space-around;
        }
        
        .nav-link {
            flex: 1;
            height: 100%;
            -webkit-tap-highlight-color: transparent;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="image-container">
        <img src="Главная1.PNG" alt="Главная 1">
        <img src="Главная2.PNG" alt="Главная 2">
        <button class="button" id="button1" onclick="window.location.href='profile.html'"></button>
        <button class="button" id="button2" onclick="window.location.href='history.html'"></button>
        <button class="button" id="button3" onclick="window.location.href='payments.html'"></button>

        <div class="balance" id="balanceDisplay1"></div>
        <div class="check" id="accountDisplay1"></div>
        <div class="balance2" id="balanceDisplay2"></div>
        <div class="check2" id="accountDisplay2"></div>
        <div class="card1" id="cardDisplay1"></div>
        <div class="card2" id="cardDisplay2"></div>
        <div class="card3" id="cardDisplay3"></div>
        <div class="expenses" id="expensesDisplay"></div>
        <div class="transfer" id="transfersDisplay"></div>

        <div class="recent-transactions" id="recentTransactions">
            <!-- Последние транзакции будут добавлены здесь через JavaScript -->
        </div>
    </div>

    <div class="navigation-container">
        <img src="навигация&#32;главная.jpg" alt="Навигация" class="navigation-image">
        <div class="nav-links">
            <a href="index.html" class="nav-link"></a>
            <a href="assistant.html" class="nav-link"></a>
            <a href="payments.html" class="nav-link"></a>
            <a href="history.html" class="nav-link"></a>
        </div>
    </div>

    <script>
        function formatAmount(amount, isIncoming = false) {
            if (!amount) return '';
            const formattedAmount = amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            return isIncoming ? `+${formattedAmount}` : formattedAmount;
        }

        function updateRecentTransactions() {
            const transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
            const recentTransactionsContainer = document.getElementById('recentTransactions');
            
            const recentTransactions = transactions
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 3);

            recentTransactionsContainer.innerHTML = '';

            recentTransactions.forEach(entry => {
                const transactionHTML = `
                    <div class="transaction" onclick="showTransactionDetails(${entry.id}, '${entry.type}')">
                        <div class="transaction-icon">
                            <img src="https://cd76796.tw1.ru/${entry.isIncoming&#32;?&#32;'Лого&#32;входящий.jpeg'&#32;:&#32;'Лого&#32;транзакции.jpg'}" alt="Transaction Logo">
                        </div>
                        <div class="transaction-details">
                            <div class="transaction-name">${entry.recipientName}</div>
                            <div class="transaction-type">${entry.type}</div>
                        </div>
                        <div class="transaction-amount ${entry.isIncoming ? 'positive' : ''}">${formatAmount(entry.amount, entry.isIncoming)} ₽</div>
                    </div>
                `;
                recentTransactionsContainer.innerHTML += transactionHTML;
            });
        }

        function showTransactionDetails(transactionId, type) {
            if (type === 'Перевод по СБП') {
                window.location.href = `checksbp.html?id=${transactionId}`;
            } else if (type === 'Клиенту Сбера') {
                window.location.href = `checksber.html?id=${transactionId}`;
            }
        }

        function updateDisplayValues() {
            const elements = {
                'balanceDisplay1': ['balance1', ' ₽', true],
                'balanceDisplay2': ['balance2', ' ₽', true],
                'cardDisplay1': ['card1', '', false],
                'cardDisplay2': ['card2', '', false],
                'cardDisplay3': ['card3', '', false],
                'accountDisplay1': ['account1', '', false],
                'accountDisplay2': ['account2', '', false],
                'expensesDisplay': ['expenses', ' ₽', true],
                'transfersDisplay': ['transfers', ' ₽', true]
            };

            for (const [elementId, [storageKey, suffix, useFormatting]] of Object.entries(elements)) {
                const value = localStorage.getItem(storageKey) || '';
                const element = document.getElementById(elementId);
                
                if (value === '') {
                    element.classList.add('hidden');
                } else {
                    element.classList.remove('hidden');
                    element.textContent = (useFormatting ? formatAmount(value) : value) + suffix;
                }
            }
        }

        window.onload = function() {
            updateDisplayValues();
            updateRecentTransactions();
        };
    </script>
</body>
</html>